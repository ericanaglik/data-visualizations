<html>
  <head>
    <title>Getting Started Data Viz</title>
  </head>
  <body>

    <div id="content"></div>
    <h3>Classes</h3>
    <div id="pClass"></div>

    <script>

    // Get a reference to div#content
    // This is where we will add dynamic elements
    const content = document.getElementById('content')
    const pClass = document.getElementById('pClass')

    fetch('titanic-passengers.json')
        .then(res => res.json())
        .then(json => handleData(json))
        .catch(err => console.log(err.message))
    
    
    function handleData(data) {
        // Get an array of relevant objects from the data
        const fields = data.map(({ fields }) => fields)

        console.log(data)

        // make a DOM element for each passenger
        fields.forEach(passenger => {
            // Make an element
            const el = document.createElement('div')
            // Attach the element to the dom
            content.appendChild(el)
            // Style the element
            el.style.width = '32px'
            el.style.height = '32px'
            el.style.backgroundColor = 'red'

            // Lesson to point above
            // Then follow through with
            el.style.margin = '1px'
            el.style.backgroundColor = passenger.sex === 'male' ? 'cornflowerblue' : 'pink'
            el.style.borderRadius = passenger.survived === 'No' ? '50%' : 'none'

        });
        // CLASS
        fields.forEach(passenger => {
          // make an element
          const el1 = document.createElement('div')
          // attach the element to the dom
          pClass.appendChild(el1)
          el1.style.width = '10px'
          el1.style.height = '10px'
          el1.style.margin = '1px'

          if(passenger.pclass === 1) {
            el1.style.backgroundColor = 'purple'
          } else if (passenger.pclass === 2) {
            el1.style.backgroundColor = 'silver'
          } else if (passenger.pclass === 3) {
            el1.style.backgroundColor = 'teal'
          } else {
            el1.style.backgroundColor = 'white'
          }
        })

        // Style content
        content.style.display = 'flex'
        content.style.flexWrap = 'wrap'
        pClass.style.display = 'flex'
        pClass.style.flexWrap = 'wrap'
    }

    </script>
  </body>
</html>